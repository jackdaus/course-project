(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"7Lvj":function(e,t,i){"use strict";i.r(t),i.d(t,"RecipesModule",(function(){return B}));var r=i("3Pt+");class n{constructor(e,t,i,r,n){this.id=e,this.name=t,this.description=i,this.imagePath=r,this.ingredients=n}}var c=i("fXoL"),o=i("tyNb"),s=i("DBWA"),a=i("GXvH"),b=i("ofXK");function p(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",17),c.Ob(1,"div",18),c.Mb(2,"input",19),c.Nb(),c.Ob(3,"div",20),c.Mb(4,"input",21),c.Nb(),c.Ob(5,"div",20),c.Ob(6,"button",4),c.Wb("click",(function(){c.lc(e);const i=t.index;return c.Yb().onDeleteIngredient(i)})),c.rc(7,"x"),c.Nb(),c.Nb(),c.Nb()}2&e&&c.dc("formGroupName",t.index)}let d=(()=>{class e{constructor(e,t,i,r){this.route=e,this.recipeService=t,this.router=i,this.dataStorageService=r,this.editMode=!1}ngOnInit(){this.route.params.subscribe(e=>{this.id=+e.id,this.editMode=null!=e.id,this.initForm()})}initForm(){let e="",t="",i="";const n=new r.c([]);if(this.editMode){const c=this.recipeService.getRecipe(this.id);if(e=c.name,t=c.imagePath,i=c.description,c.ingredients)for(const e of c.ingredients)n.push(new r.g({name:new r.e(e.name,r.t.required),amount:new r.e(e.amount,[r.t.required,r.t.pattern(/^[1-9]+[0*9]*$/)])}))}this.recipeForm=new r.g({name:new r.e(e,r.t.required),imagePath:new r.e(t,r.t.required),description:new r.e(i,r.t.required),ingredients:n})}onSubmit(){const e=new n(2,this.recipeForm.value.name,this.recipeForm.value.description,this.recipeForm.value.imagePath,this.recipeForm.value.ingredients);if(this.editMode)this.recipeService.updateRecipe(this.id,e),this.router.navigate(["/recipes",this.id]);else{this.recipeService.addRecipe(e);const t=this.recipeService.getRecipes().length-1;this.router.navigate(["/recipes",t])}this.dataStorageService.storeRecipes()}get controls(){return this.recipeForm.get("ingredients").controls}onDeleteIngredient(e){console.log(this.recipeForm.controls.ingredients),this.recipeForm.controls.ingredients.removeAt(e)}onAddIngredient(){this.recipeForm.controls.ingredients.push(new r.g({name:new r.e(null,r.t.required),amount:new r.e(null,[r.t.required,r.t.pattern(/^[1-9]+[0*9]*$/)])}))}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(o.a),c.Lb(s.a),c.Lb(o.c),c.Lb(a.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-recipe-edit"]],decls:39,vars:4,consts:[[1,"row"],[1,"col-xs-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","imagePath"],["type","text","id","imagePath","formControlName","imagePath",1,"form-control"],["imagePath",""],[1,"img-responsive",3,"src"],["for","description"],["type","text","id","description","rows","6","formControlName","description",1,"form-control"],["formArrayName","ingredients",1,"col-xs-12"],["class","row","style","margin-top: 10px",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"],[1,"row",2,"margin-top","10px",3,"formGroupName"],[1,"col-xs-8"],["type","text","formControlName","name",1,"form-control"],[1,"col-xs-2"],["type","number","formControlName","amount",1,"form-control"]],template:function(e,t){if(1&e&&(c.Ob(0,"div",0),c.Ob(1,"div",1),c.Ob(2,"form",2),c.Wb("ngSubmit",(function(){return t.onSubmit()})),c.Ob(3,"div",0),c.Ob(4,"div",1),c.Ob(5,"button",3),c.rc(6,"Save"),c.Nb(),c.Ob(7,"button",4),c.Wb("click",(function(){return t.onCancel()})),c.rc(8,"Cancel"),c.Nb(),c.Nb(),c.Nb(),c.Ob(9,"div",0),c.Ob(10,"div",1),c.Ob(11,"div",5),c.Ob(12,"label",6),c.rc(13,"Name"),c.Nb(),c.Mb(14,"input",7),c.Nb(),c.Nb(),c.Nb(),c.Ob(15,"div",0),c.Ob(16,"div",1),c.Ob(17,"div",5),c.Ob(18,"label",8),c.rc(19,"Image URL"),c.Nb(),c.Mb(20,"input",9,10),c.Nb(),c.Nb(),c.Nb(),c.Ob(22,"div",0),c.Ob(23,"div",1),c.Mb(24,"img",11),c.Nb(),c.Nb(),c.Ob(25,"div",0),c.Ob(26,"div",1),c.Ob(27,"div",5),c.Ob(28,"label",12),c.rc(29,"Description"),c.Nb(),c.Mb(30,"textarea",13),c.Nb(),c.Nb(),c.Nb(),c.Ob(31,"div",0),c.Ob(32,"div",14),c.qc(33,p,8,1,"div",15),c.Nb(),c.Nb(),c.Mb(34,"hr"),c.Ob(35,"div",0),c.Ob(36,"div",1),c.Ob(37,"button",16),c.Wb("click",(function(){return t.onAddIngredient()})),c.rc(38,"Add Ingredient"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e){const e=c.ic(21);c.Bb(2),c.dc("formGroup",t.recipeForm),c.Bb(3),c.dc("disabled",!t.recipeForm.valid),c.Bb(19),c.dc("src",e.value,c.mc),c.Bb(9),c.dc("ngForOf",t.controls)}},directives:[r.u,r.m,r.h,r.a,r.l,r.f,r.d,b.j,r.i,r.p],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]}),e})(),u=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Fb({type:e,selectors:[["app-recipe-start"]],decls:2,vars:0,template:function(e,t){1&e&&(c.Ob(0,"h3"),c.rc(1,"Please select a recipe."),c.Nb())},styles:[""]}),e})();const l=function(e){return["/recipes",e]};let m=(()=>{class e{ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Fb({type:e,selectors:[["app-recipe-item"]],inputs:{recipe:"recipe",index:"index"},decls:8,vars:7,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",2,"cursor","pointer",3,"routerLink"],[1,"pull-left"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right"],[1,"img-responsive",2,"max-height","50px",3,"src","alt"]],template:function(e,t){1&e&&(c.Ob(0,"a",0),c.Ob(1,"div",1),c.Ob(2,"h4",2),c.rc(3),c.Nb(),c.Ob(4,"p",3),c.rc(5),c.Nb(),c.Nb(),c.Ob(6,"span",4),c.Mb(7,"img",5),c.Nb(),c.Nb()),2&e&&(c.dc("routerLink",c.gc(5,l,t.index)),c.Bb(3),c.sc(t.recipe.name),c.Bb(2),c.sc(t.recipe.description),c.Bb(2),c.ec("src",t.recipe.imagePath,c.mc),c.ec("alt",t.recipe.name))},directives:[o.e,o.d],styles:[""]}),e})();function h(e,t){if(1&e&&c.Mb(0,"app-recipe-item",4),2&e){const e=t.index;c.dc("recipe",t.$implicit)("index",e)}}let v=(()=>{class e{constructor(e,t){this.recipeService=e,this.router=t}ngOnInit(){this.recipes=this.recipeService.getRecipes(),this.recipeSubscription=this.recipeService.recipesChanged.subscribe(e=>{this.recipes=e})}onNewRecipe(){this.router.navigate(["/recipes","new"])}ngOnDestroy(){this.recipeSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(s.a),c.Lb(o.c))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-recipe-list"]],decls:8,vars:1,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-success",3,"click"],["routerLinkActive","active",3,"recipe","index",4,"ngFor","ngForOf"],["routerLinkActive","active",3,"recipe","index"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"div",1),c.Ob(2,"button",2),c.Wb("click",(function(){return t.onNewRecipe()})),c.rc(3,"New recipe"),c.Nb(),c.Nb(),c.Nb(),c.Mb(4,"hr"),c.Ob(5,"div",0),c.Ob(6,"div",1),c.qc(7,h,1,2,"app-recipe-item",3),c.Nb(),c.Nb()),2&e&&(c.Bb(7),c.dc("ngForOf",t.recipes))},directives:[b.j,m,o.d],styles:[""]}),e})(),g=(()=>{class e{constructor(e){this.dataStorageService=e}ngOnInit(){this.dataStorageService.retrieveRecipes().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(a.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"ro"],[1,"col-md-5"],[1,"col-md-7"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"div",1),c.Mb(2,"app-recipe-list"),c.Nb(),c.Ob(3,"div",2),c.Mb(4,"router-outlet"),c.Nb(),c.Nb())},directives:[v,o.g],styles:[""]}),e})();var f=i("ozzT"),N=i("XiUz"),O=i("bTqV"),S=i("Qu3c"),w=i("NFeN");function x(e,t){if(1&e&&(c.Ob(0,"li",9),c.rc(1),c.Nb()),2&e){const e=t.$implicit;c.Bb(1),c.uc(" ",e.name," - ",e.amount," ")}}let F=(()=>{class e{constructor(e,t,i,r,n){this.slService=e,this.recipeSerice=t,this.route=i,this.router=r,this.dataStorageService=n}ngOnInit(){this.route.params.subscribe(e=>{this.recipeIdFromRoute=e.id,this.recipe=this.recipeSerice.getRecipe(this.recipeIdFromRoute)})}sendToShoppingList(){for(const e of this.recipe.ingredients)this.slService.addIngredient(e);alert("Items sent to Shopping List!")}editRecipe(){this.router.navigate(["edit"],{relativeTo:this.route})}onDeleteRecipe(){this.recipeSerice.deleteRecipe(this.recipeIdFromRoute),this.dataStorageService.storeRecipes(),this.router.navigate(["recipes"])}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(f.a),c.Lb(s.a),c.Lb(o.a),c.Lb(o.c),c.Lb(a.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-recipe-detail"]],decls:24,vars:5,consts:[[1,"row"],[1,"col-xs-12"],[1,"img-responsive",2,"max-height","300px",3,"src","alt"],["fxLayout","row","fxLayoutAlign","space-between end",1,"col-xs-12"],["mat-icon-button","","matTooltip","Send to shopping list",3,"click"],["mat-icon-button","","matTooltip","Edit recipe",3,"click"],["mat-icon-button","","matTooltip","Delete recipe",3,"click"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"div",1),c.Mb(2,"img",2),c.Nb(),c.Nb(),c.Ob(3,"div",0),c.Ob(4,"div",3),c.Ob(5,"h1"),c.rc(6),c.Nb(),c.Ob(7,"div"),c.Ob(8,"button",4),c.Wb("click",(function(){return t.sendToShoppingList()})),c.Ob(9,"mat-icon"),c.rc(10,"assignment"),c.Nb(),c.Nb(),c.Ob(11,"button",5),c.Wb("click",(function(){return t.editRecipe()})),c.Ob(12,"mat-icon"),c.rc(13,"edit"),c.Nb(),c.Nb(),c.Ob(14,"button",6),c.Wb("click",(function(){return t.onDeleteRecipe()})),c.Ob(15,"mat-icon"),c.rc(16,"delete"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(17,"div",0),c.Ob(18,"div",1),c.rc(19),c.Nb(),c.Nb(),c.Ob(20,"div",0),c.Ob(21,"div",1),c.Ob(22,"ul",7),c.qc(23,x,2,2,"li",8),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.Bb(2),c.ec("alt",t.recipe.imagePath),c.dc("src",t.recipe.imagePath,c.mc),c.Bb(4),c.sc(t.recipe.name),c.Bb(13),c.tc(" ",t.recipe.description," "),c.Bb(4),c.dc("ngForOf",t.recipe.ingredients))},directives:[N.b,N.a,O.a,S.a,w.a,b.j],styles:[""]}),e})(),y=(()=>{class e{constructor(e,t){this.dataStorageService=e,this.recipeService=t}resolve(e,t){const i=this.recipeService.getRecipes();return 0===i.length?this.dataStorageService.retrieveRecipes():i}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(a.a),c.Sb(s.a))},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var L=i("PCNd"),k=i("IzEk"),R=i("lJxs"),I=i("qXBG");let M=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.authService.user.pipe(Object(k.a)(1),Object(R.a)(e=>!!e||this.router.createUrlTree(["/auth"])))}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(I.a),c.Sb(o.c))},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const P=[{path:"",component:g,children:[{path:"",component:u},{path:"new",component:d,canActivate:[M]},{path:":id/edit",component:d,canActivate:[M]},{path:":id",component:F,resolve:[y]}]}];let B=(()=>{class e{}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},imports:[[o.f.forChild(P),r.r,L.a]]}),e})()}}]);